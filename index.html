<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Na Música Hoje</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:#fff;text-align:center}
button{background:#6a00ff;color:#fff;border:none;padding:12px 18px;border-radius:8px;margin:6px}
img{border-radius:10px}
.screen{display:none;padding:20px}
.active{display:block}
.artist{display:flex;align-items:center;background:#1a1a1a;margin:10px;padding:10px;border-radius:10px;cursor:pointer}
.artist img{width:70px;height:70px;margin-right:10px}
.song{background:#1a1a1a;margin:8px;padding:10px;border-radius:8px}
</style>
</head>
<body>

<!-- TELA 1 -->
<div id="screen1" class="screen active">
  <h2>Na Música Hoje</h2>
  <button onclick="abrirPeriodo('hoje')">HOJE</button>
  <button onclick="abrirPeriodo('ontem')">ONTEM</button>
  <button onclick="abrirPeriodo('semana')">NA SEMANA</button>
  <br>
  <button onclick="sair()">SAIR</button>
</div>

<!-- TELA 2 -->
<div id="screen2" class="screen">
  <h2 id="tituloPeriodo"></h2>
  <div id="listaArtistas"></div>
  <button onclick="voltar(1)">VOLTAR</button>
  <button onclick="sair()">SAIR</button>
</div>

<!-- TELA 3 -->
<div id="screen3" class="screen">
  <img id="fotoArtista" width="120"><br>
  <h2 id="nomeArtista"></h2>
  <div id="listaMusicas"></div>
  <button onclick="voltar(2)">VOLTAR</button>
  <button onclick="sair()">SAIR</button>
</div>

<script>
const API = "https://na-musica-hoje.onrender.com/period?period=";
let artistas = [];

function mostrar(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function sair(){
  window.close();
}

async function abrirPeriodo(p){
  const r = await fetch(API+p);
  const d = await r.json();
  artistas = d.artists;

  document.getElementById("tituloPeriodo").innerText = p.toUpperCase();
  const lista = document.getElementById("listaArtistas");
  lista.innerHTML = "";

  artistas.forEach((a,i)=>{
    lista.innerHTML += `
      <div class="artist" onclick="abrirArtista(${i})">
        <img src="${a.image}">
        <div>${a.artist}</div>
      </div>`;
  });

  mostrar("screen2");
}

function abrirArtista(i){
  const a = artistas[i];
  document.getElementById("fotoArtista").src = a.image;
  document.getElementById("nomeArtista").innerText = a.artist;

  const lista = document.getElementById("listaMusicas");
  lista.innerHTML = "";

  a.songs.forEach(s=>{
    lista.innerHTML += `
      <div class="song">
        ${s.title}<br>
        <button onclick="window.open('${s.youtube}')">YouTube</button>
      </div>`;
  });

  mostrar("screen3");
}

function voltar(tela){
  mostrar("screen"+tela);
}
</script>

</body>
</html>
